<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Extrair data exata de reviews do Google Maps</title>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f5f5f5;
      padding: 40px;
      color: #222;
    }

    h1 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    p {
      margin-top: 0;
      color: #555;
    }

    textarea {
      width: 100%;
      height: 220px;
      padding: 12px;
      font-family: monospace;
      font-size: 13px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fff;
    }

    button {
      margin-top: 16px;
      padding: 10px 22px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      background: #2563eb;
      color: #fff;
      cursor: pointer;
    }

    button:hover {
      background: #1e40af;
    }

    .result {
      margin-top: 30px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #e5e5e5;
    }

    .item {
      margin-bottom: 14px;
    }

    .label {
      font-size: 13px;
      color: #666;
    }

    .value {
      font-size: 20px;
      font-weight: 600;
    }

    .blue { color: #2563eb; }
    .green { color: #16a34a; }
    .purple { color: #7c3aed; }
    .orange { color: #ea580c; }
  </style>
</head>

<body>

<h1>Extrair data exata de reviews do Google Maps</h1>
<p>Cole abaixo o código bruto (JSON) do Google Maps:</p>

<textarea id="input"></textarea>
<br>
<button onclick="extrair()">Extrair data</button>

<div id="resultado" class="result" style="display:none;">
  <div class="item">
    <div class="label">Data completa (BRT)</div>
    <div id="dataCompleta" class="value blue"></div>
  </div>

  <div class="item">
    <div class="label">Número total de dias</div>
    <div id="dias" class="value green"></div>
  </div>

  <div class="item">
    <div class="label">Número total de meses</div>
    <div id="meses" class="value purple"></div>
  </div>

  <div class="item">
    <div class="label">Número total de anos</div>
    <div id="anos" class="value orange"></div>
  </div>
</div>

<script>
function extrair() {
  const texto = document.getElementById("input").value;

  // Procura: null, 16 dígitos
  const match = texto.match(/null,\s*(\d{16})/);

  if (!match) {
    alert("Timestamp de 16 dígitos não encontrado");
    return;
  }

  const micro = Number(match[1]);
  const dataUTC = new Date((micro / 1_000_000) * 1000);
  const dataBRT = new Date(dataUTC.getTime() - (3 * 60 * 60 * 1000));

  const agora = new Date();
  const diffMs = agora - dataBRT;

  const totalDias = Math.floor(diffMs / (1000 * 60 * 60 * 24));
  const totalMeses = Math.floor(totalDias / 30);
  const totalAnos = Math.floor(totalDias / 365);

  document.getElementById("dataCompleta").innerText =
    dataBRT.toLocaleString("pt-BR");

  document.getElementById("dias").innerText = totalDias;
  document.getElementById("meses").innerText = totalMeses;
  document.getElementById("anos").innerText = totalAnos;

  document.getElementById("resultado").style.display = "block";
}
</script>

</body>
</html>
